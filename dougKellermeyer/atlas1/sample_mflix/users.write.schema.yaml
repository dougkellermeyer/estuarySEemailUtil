$defs:
  flow://connector-schema:
    $id: flow://connector-schema
    if:
      properties:
        _meta:
          properties:
            op:
              const: d
    properties:
      _id:
        type: string
      _meta:
        $schema: https://json-schema.org/draft/2020-12/schema
        properties:
          op:
            type: string
            enum:
            - c
            - u
            - d
            title: Change Operation
            description: 'Change operation type: ''c'' Create/Insert ''u'' Update ''d'' Delete.'
          before:
            type: object
            title: Before Document
            description: Record state immediately before this change was applied. Available if pre-images are enabled for the MongoDB collection.
          source:
            properties:
              db:
                type: string
                description: Name of the source MongoDB database.
              collection:
                type: string
                description: Name of the source MongoDB collection.
              snapshot:
                type: boolean
                description: Snapshot is true if the record was produced from an initial backfill and unset if produced from the change stream.
            additionalProperties: false
            type: object
            required:
            - db
            - collection
            title: Source
            description: Document source metadata.
        type: object
    required:
    - _id
    then:
      reduce:
        delete: true
        strategy: merge
    type: object
    x-infer-schema: true
$ref: flow://connector-schema
